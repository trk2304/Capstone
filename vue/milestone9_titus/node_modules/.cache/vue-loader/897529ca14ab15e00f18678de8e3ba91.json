{"remainingRequest":"/var/www/html/MidTrade/Capstone/vue/milestone9_titus/node_modules/vue-loader/lib/index.js??vue-loader-options!/var/www/html/MidTrade/Capstone/vue/milestone9_titus/src/components/ListingBlock.vue?vue&type=script&lang=js&","dependencies":[{"path":"/var/www/html/MidTrade/Capstone/vue/milestone9_titus/src/components/ListingBlock.vue","mtime":1615771918570},{"path":"/var/www/html/MidTrade/Capstone/vue/milestone9_titus/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/var/www/html/MidTrade/Capstone/vue/milestone9_titus/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/var/www/html/MidTrade/Capstone/vue/milestone9_titus/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/var/www/html/MidTrade/Capstone/vue/milestone9_titus/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBheGlvcyBmcm9tICdheGlvcycKaW1wb3J0IEVkaXRMaXN0aW5nIGZyb20gJy4vRWRpdExpc3RpbmcnCmltcG9ydCBVcGxvYWRMaXN0aW5nSW1hZ2UgZnJvbSAnLi9VcGxvYWRMaXN0aW5nSW1hZ2UudnVlJwppbXBvcnQgQ2xlYXJMaXN0aW5nSW1hZ2VzIGZyb20gJy4vQ2xlYXJMaXN0aW5nSW1hZ2VzLnZ1ZScKZXhwb3J0IGRlZmF1bHQgewogICAgbmFtZTogIkxpc3RpbmdCbG9jayIsCiAgICBjb21wb25lbnRzOiB7CiAgICAgIEVkaXRMaXN0aW5nLAogICAgICBVcGxvYWRMaXN0aW5nSW1hZ2UsCiAgICAgIENsZWFyTGlzdGluZ0ltYWdlcwogICAgfSwKICAgIGRhdGEoKSB7CiAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgbGlzdGluZ3M6IFtdLAogICAgICAgICAgICBlcnJvcnM6IFtdLAogICAgICAgICAgICByZW5kZXJLZXk6IDAKICAgICAgICB9CiAgICB9LAogICAgbW91bnRlZCgpIHsKICAgICAgICAvLyBZb3Ugc2hvdWxkIGJlIGFibGUgdG8gbW9kaWZ5IHRoZSBVUkwgYmFzZWQgb24gd2hhdCB0aGUgY3VycmVudCByb3V0ZSBpcy4KICAgICAgICBheGlvcy5nZXQoImh0dHA6Ly9taWRuLmNzLnVzbmEuZWR1L01pZFRyYWRlL0NhcHN0b25lL3Z1ZS9taWxlc3RvbmU5X3RpdHVzL3NyYy9kYi9nZXRVc2VyTGlzdGluZ3MucGhwP3VzZXJJRD0iICsgdGhpcy4kc3RvcmUuZ2V0dGVycy5nZXRVc2VyKQogICAgICAgIC50aGVuKHJlc3BvbnNlID0+IHsKICAgICAgICAgICAgdGhpcy5saXN0aW5ncyA9IHJlc3BvbnNlLmRhdGEKICAgICAgICAgICAgY29uc29sZS5sb2codGhpcy4kc3RvcmUuZ2V0dGVycy5nZXRVc2VyKTsKICAgICAgICB9KQogICAgICAgIC5jYXRjaChmdW5jdGlvbiAoZXJyb3IpIHsKICAgICAgICAgICAgdGhpcy5lcnJvcnMucHVzaChlcnJvcikKICAgICAgICB9KQogICAgfSwKICAgIG1ldGhvZHM6IHsKICAgICAgICBkZWxldGVMaXN0aW5nOiBmdW5jdGlvbihpZCkgewogICAgICAgICAgICBjb25zb2xlLmxvZygiRGVsZXRlIHRoaXMgdGhpbmcgd2l0aCB0aGUgZm9sbG93aW5nIElEOiAiICsgaWQpCgogICAgICAgICAgICBheGlvcy5wb3N0KCdodHRwOi8vbWlkbi5jcy51c25hLmVkdS9NaWRUcmFkZS9DYXBzdG9uZS92dWUvbWlsZXN0b25lOV90aXR1cy9zcmMvZGIvZGVsZXRlVXNlckxpc3RpbmcucGhwJywgewogICAgICAgICAgICAgICAgbGlzdGluZ0lEOiBpZAogICAgICAgICAgICB9KQogICAgICAgICAgICAudGhlbihmdW5jdGlvbihyZXNwb25zZSkgewogICAgICAgICAgICAgICAgY29uc29sZS5sb2cocmVzcG9uc2UpCiAgICAgICAgICAgIH0pCiAgICAgICAgICAgIC5jYXRjaChmdW5jdGlvbihlcnJvcikgewogICAgICAgICAgICAgICAgY29uc29sZS5sb2coZXJyb3IpCiAgICAgICAgICAgIH0pCgogICAgICAgICAgICBhbGVydCgnTGlzdGluZyBTdWNjZXNzZnVsbHkgRGVsZXRlZCcpCiAgICAgICAgICAgIAogICAgICAgICAgICAvLyBBIHRlbXBvcm9hcnkgZml4LiBUcnkgdG8gZmluZCBhIHdheSB0byByZS1yZW5kZXIgY29tcG9uZW50IGFzeW5jaHJvbm91c2x5LgogICAgICAgICAgICB3aW5kb3cubG9jYXRpb24ucmVsb2FkKCkKICAgICAgICB9LAogICAgICAgIC8vIE9ubHkgYWNjZXNzIHRoaXMgZnVuY3Rpb24gaWYgdGhlIHJvdXRlIGlzIGluIHRoZSBwcm9maWxlLiBLZWVwcyBvdGhlcnMgZnJvbSBkZWxldGluZyB0aGlzIHVzZXIncyBwb3N0cy4KICAgICAgICBwcm9maWxlOiBmdW5jdGlvbigpIHsKICAgICAgICAgICAgaWYodGhpcy4kcm91dGUuZnVsbFBhdGguaW5jbHVkZXModGhpcy4kc3RvcmUuZ2V0dGVycy5nZXRVc2VyKSkgewogICAgICAgICAgICAgICAgcmV0dXJuIHRydWUKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZQogICAgICAgICAgICB9CiAgICAgICAgfSwKCiAgICAgICAgZWRpdExpc3Rpbmc6IGZ1bmN0aW9uKCkgewoKICAgICAgICB9CgogICAgfQoKfQo="},{"version":3,"sources":["ListingBlock.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAkEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;;AAEA","file":"ListingBlock.vue","sourceRoot":"src/components","sourcesContent":["<template :key=\"renderKey\">\n    <div class=\"block\">\n        <v-container class=\"listingBlocks\">\n            <v-row class=\"d-flex justify-space-around\" v-if=\"!(this.listings === undefined) && this.listings.length != 0 && this.listings != 'No rows'\">\n                <v-card \n                    v-for=\"listing in listings\"\n                    :key=\"listing.listingID\"\n                    width=\"760px\"\n                    class=\"listingCard\"\n                >\n                    <v-img\n                        class=\"white--text align-end\"\n                        height=\"200px\"\n                        src=\"https://via.placeholder.com/150\"\n                    >\n                        <v-card-title class=\"listingTitle\">{{ listing.productName }}</v-card-title>\n                    </v-img>\n\n                    <v-card-subtitle class=\"pb-10\">\n                        ${{ listing.price }} | {{listing.category}}\n                    </v-card-subtitle>\n\n                    <v-card-text class=\"text--primary\">\n                        <p>{{ listing.description }}</p>\n                    </v-card-text>\n\n                    <v-card-actions>\n                        <v-btn\n                            color=\"primary\"\n                            text\n                            :to=\"'/listingView/' + listing.listingID\"\n                        >\n                            View Listing\n                        </v-btn>\n\n                        <v-btn \n                            v-if=\"profile()\"\n                            color=\"primary\"\n                            text\n                            @click=\"deleteListing(listing.listingID)\"\n                        >\n                            Delete Listing\n                        </v-btn>\n\n                        <span v-if=\"profile()\">\n                          <EditListing :listing=\"listing\"/>\n                        </span> \n\n                        <span v-if=\"profile()\">\n                          <UploadListingImage :listing=\"listing\"/>\n                        </span>\n    \n                        <span v-if=\"profile()\">\n                          <ClearListingImages :listing=\"listing\"/>\n                        </span> \n                    </v-card-actions>\n                </v-card>\n            </v-row>\n            <div v-else>\n                <h3>You currently have no listings!</h3>\n            </div>\n        </v-container>\n    </div>\n</template>\n\n<script>\nimport axios from 'axios'\nimport EditListing from './EditListing'\nimport UploadListingImage from './UploadListingImage.vue'\nimport ClearListingImages from './ClearListingImages.vue'\nexport default {\n    name: \"ListingBlock\",\n    components: {\n      EditListing,\n      UploadListingImage,\n      ClearListingImages\n    },\n    data() {\n        return {\n            listings: [],\n            errors: [],\n            renderKey: 0\n        }\n    },\n    mounted() {\n        // You should be able to modify the URL based on what the current route is.\n        axios.get(\"http://midn.cs.usna.edu/MidTrade/Capstone/vue/milestone9_titus/src/db/getUserListings.php?userID=\" + this.$store.getters.getUser)\n        .then(response => {\n            this.listings = response.data\n            console.log(this.$store.getters.getUser);\n        })\n        .catch(function (error) {\n            this.errors.push(error)\n        })\n    },\n    methods: {\n        deleteListing: function(id) {\n            console.log(\"Delete this thing with the following ID: \" + id)\n\n            axios.post('http://midn.cs.usna.edu/MidTrade/Capstone/vue/milestone9_titus/src/db/deleteUserListing.php', {\n                listingID: id\n            })\n            .then(function(response) {\n                console.log(response)\n            })\n            .catch(function(error) {\n                console.log(error)\n            })\n\n            alert('Listing Successfully Deleted')\n            \n            // A temporoary fix. Try to find a way to re-render component asynchronously.\n            window.location.reload()\n        },\n        // Only access this function if the route is in the profile. Keeps others from deleting this user's posts.\n        profile: function() {\n            if(this.$route.fullPath.includes(this.$store.getters.getUser)) {\n                return true\n            } else {\n                return false\n            }\n        },\n\n        editListing: function() {\n\n        }\n\n    }\n\n}\n</script>\n\n<style scoped>\n\n.listingTitle {\n    color: black;\n}\n\n.listingBlocks {\n    margin-top: 3rem;\n}\n\n.listingCard {\n    margin: 1.0rem;\n}\n</style>\n"]}]}