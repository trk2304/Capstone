{"remainingRequest":"/var/www/html/MidTrade/Capstone/vue/milestone9_titus/node_modules/vue-loader/lib/index.js??vue-loader-options!/var/www/html/MidTrade/Capstone/vue/milestone9_titus/src/views/Listings.vue?vue&type=script&lang=js&","dependencies":[{"path":"/var/www/html/MidTrade/Capstone/vue/milestone9_titus/src/views/Listings.vue","mtime":1615779513681},{"path":"/var/www/html/MidTrade/Capstone/vue/milestone9_titus/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/var/www/html/MidTrade/Capstone/vue/milestone9_titus/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/var/www/html/MidTrade/Capstone/vue/milestone9_titus/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/var/www/html/MidTrade/Capstone/vue/milestone9_titus/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBheGlvcyBmcm9tICdheGlvcycKaW1wb3J0IEZpbHRlckxpc3RpbmcgZnJvbSAnLi4vY29tcG9uZW50cy9GaWx0ZXJMaXN0aW5nLnZ1ZScKaW1wb3J0IExpc3RpbmcgZnJvbSAnLi4vY29tcG9uZW50cy9MaXN0aW5nLnZ1ZScKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICdMaXN0aW5ncycsCiAgY29tcG9uZW50czogewogICAgRmlsdGVyTGlzdGluZywKICAgIExpc3RpbmcKICB9LAogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBjYXRlZ29yeTogJycsCiAgICAgIGxpc3RpbmdzOiAnJwogICAgfQogIH0sCiAgbWV0aG9kczogewogICAgc2V0RmlsdGVyOiBmdW5jdGlvbih2YWx1ZSkgewogICAgICBpZih2YWx1ZSA9PSAnJykgewogICAgICAgIGFsZXJ0KCJZb3UgY2FuIG9ubHkgYXBwbHkgYSBmaWx0ZXIgb25jZSB5b3UgaGF2ZSBjaG9zZW4gb25lLiIpCiAgICAgIH0gZWxzZSBpZiAodmFsdWUgPT0gJ2FsbCcpIHsKICAgICAgICBheGlvcy5nZXQoJ2h0dHA6Ly9taWRuLmNzLnVzbmEuZWR1L01pZFRyYWRlL0NhcHN0b25lL3Z1ZS9taWxlc3RvbmU5X3RpdHVzL3NyYy9kYi9nZXRBbGxMaXN0aW5ncy5waHAnKQogICAgICAgIC50aGVuKHJlc3VsdCA9PiB7CiAgICAgICAgICAgdGhpcy5saXN0aW5ncyA9IHJlc3VsdC5kYXRhCiAgICAgICAgfSkKICAgICAgICAuY2F0Y2goZSA9PiB7CiAgICAgICAgICBjb25zb2xlLmxvZyhlKQogICAgICAgIH0pCiAgICAgIH0gZWxzZSB7CiAgICAgICAgIHRoaXMuY2F0ZWdvcnkgPSB2YWx1ZQogICAgICAgICAgYXhpb3MuZ2V0KCJodHRwOi8vbWlkbi5jcy51c25hLmVkdS9NaWRUcmFkZS9DYXBzdG9uZS92dWUvbWlsZXN0b25lOV90aXR1cy9zcmMvZGIvZ2V0TGlzdGluZ0J5Q2F0ZWdvcnkucGhwP2NhdGVnb3J5PSIgKyB0aGlzLmNhdGVnb3J5KQogICAgICAgICAgLnRoZW4ocmVzdWx0ID0+IHsKICAgICAgICAgICAgaWYocmVzdWx0LmRhdGEgPT0gIk5vIHJvd3MiKQogICAgICAgICAgICAgIGFsZXJ0KCdTb3JyeSwgdGhlcmUgY3VycmVudGx5IGFyZW4ndCBhbnkgaXRlbXMgaW4gdGhpcyBjYXRlZ29yeS4nKQogICAgICAgICAgICBlbHNlIHsgCiAgICAgICAgICAgICAgdGhpcy5saXN0aW5ncyA9IHJlc3VsdC5kYXRhCiAgICAgICAgICAgICAgdGhpcy4kZm9yY2VVcGRhdGUoKQogICAgICAgICAgICB9CiAgICAgICAgICB9KQogICAgICAgICAgLmNhdGNoKGUgPT4gewogICAgICAgICAgICBjb25zb2xlLmxvZyhlKQogICAgICAgICAgfSkKICAgICAgfQogICAgfQogIH0sCiAgY3JlYXRlZCgpIHsKICAgIGF4aW9zLmdldCgnaHR0cDovL21pZG4uY3MudXNuYS5lZHUvTWlkVHJhZGUvQ2Fwc3RvbmUvdnVlL21pbGVzdG9uZTlfdGl0dXMvc3JjL2RiL2dldEFsbExpc3RpbmdzLnBocCcpCiAgICAudGhlbihyZXN1bHQgPT4gewogICAgICAgdGhpcy5saXN0aW5ncyA9IHJlc3VsdC5kYXRhCiAgICAgICBjb25zb2xlLmxvZyh0aGlzLmxpc3RpbmdzKQogICAgfSkKICAgIC5jYXRjaChlID0+IHsKICAgICAgY29uc29sZS5sb2coZSkKICAgIH0pCiAgfQp9Cg=="},{"version":3,"sources":["Listings.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;AAuBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Listings.vue","sourceRoot":"src/views","sourcesContent":["<template>\n    <v-container>\n \n      <br> \n      <h1 class=\"display-1\">Explore Listings on MidTrade Now</h1>\n\n      <div>\n        <FilterListing @applyFilter=\"setFilter\"/>\n      </div>\n\n      <v-row>\n          <Listing     \n            v-for=\"listing in listings\"\n            :listing=\"listing\"\n            :key=\"listing.listingID\"\n            class=\"listing\"\n          />\n      </v-row>\n\n    </v-container>\n</template>\n\n<script>\nimport axios from 'axios'\nimport FilterListing from '../components/FilterListing.vue'\nimport Listing from '../components/Listing.vue'\nexport default {\n  name: 'Listings',\n  components: {\n    FilterListing,\n    Listing\n  },\n  data() {\n    return {\n      category: '',\n      listings: ''\n    }\n  },\n  methods: {\n    setFilter: function(value) {\n      if(value == '') {\n        alert(\"You can only apply a filter once you have chosen one.\")\n      } else if (value == 'all') {\n        axios.get('http://midn.cs.usna.edu/MidTrade/Capstone/vue/milestone9_titus/src/db/getAllListings.php')\n        .then(result => {\n           this.listings = result.data\n        })\n        .catch(e => {\n          console.log(e)\n        })\n      } else {\n         this.category = value\n          axios.get(\"http://midn.cs.usna.edu/MidTrade/Capstone/vue/milestone9_titus/src/db/getListingByCategory.php?category=\" + this.category)\n          .then(result => {\n            if(result.data == \"No rows\")\n              alert('Sorry, there currently aren't any items in this category.')\n            else { \n              this.listings = result.data\n              this.$forceUpdate()\n            }\n          })\n          .catch(e => {\n            console.log(e)\n          })\n      }\n    }\n  },\n  created() {\n    axios.get('http://midn.cs.usna.edu/MidTrade/Capstone/vue/milestone9_titus/src/db/getAllListings.php')\n    .then(result => {\n       this.listings = result.data\n       console.log(this.listings)\n    })\n    .catch(e => {\n      console.log(e)\n    })\n  }\n}\n</script>\n\n<style scoped>\n.listing {\n  margin-top: 2rem;\n  margin-bottom: 2rem;\n}\n</style>\n\n"]}]}